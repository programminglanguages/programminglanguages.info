"use strict";var default_color="#999";d3.json("/influence-graph.json").then(function(a){var b=jLouvain().nodes(a.nodes.map(function(a){return a.id})).edges(a.links),c=b().communities,d=d3.scaleSequential(d3.interpolateCool).domain(d3.extent(Object.values(c))),e=function(a){return c?d(c[a]):default_color},f=0,g=0;a.nodes.forEach(function(b){var c=0;a.links.forEach(function(a){a.source==b.id&&c++}),f=Math.max(f,c),g=Math.min(g,c),b.source_count=c,b.color=e(b.id)});var h=d3.scaleLinear().domain([g,f]).range([6,40]),i=ForceGraph3D({controlType:"fly",extraRenderers:[new THREE.CSS2DRenderer]})(document.getElementById("3d-graph")).graphData(a).nodeAutoColorBy("color").nodeLabel("label").nodeOpacity(1).nodeVal(function(a){return a.source_count}).nodeThreeObject(function(a){var b=document.createElement("div");return b.textContent=a.label,b.style.color="#fff",b.style.fontSize="".concat(h(a.source_count),"px"),new THREE.CSS2DObject(b)}).linkDirectionalArrowLength(3.5).linkDirectionalArrowRelPos(1).linkCurvature(.25).nodeThreeObjectExtend(!0);i.d3Force("charge").strength(-500)});