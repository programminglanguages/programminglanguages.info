"use strict";var label_nodes=new Map,node_labels=new Map,height_factor=.5,zoomScale=d3.scaleLog().domain([1,100]).range([5,.8]);d3.json("/influence-graph.json").then(function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=a.nodes[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value,h=g.label;label_nodes.has(h)&&(h=g.sitelink),g.label=h,node_labels.set(g.id,h),label_nodes.set(h,g.id)}}catch(a){c=!0,d=a}finally{try{b||null==f.return||f.return()}finally{if(c)throw d}}var i=[],j=[],k=new Set([wikidata_id]),l=!0,m=!1,n=void 0;try{for(var o,p,q=a.links[Symbol.iterator]();!(l=(o=q.next()).done);l=!0)p=o.value,p.source==wikidata_id?(k.add(p.target),j.push(node_labels.get(p.target))):p.target==wikidata_id&&(k.add(p.source),i.push(node_labels.get(p.source)))}catch(a){m=!0,n=a}finally{try{l||null==q.return||q.return()}finally{if(m)throw n}}var r=a.nodes.filter(function(a){return k.has(a.id)}),s=a.links.filter(function(a){return k.has(a.source)&&k.has(a.target)}),t=document.getElementById("network"),u=t.getBoundingClientRect().width;t.style.height="".concat(u*height_factor,"px");var v=new DiGraph(r,s,"outdegree","mouse");v.draw("#network"),v.zoom.scaleTo(v.g,zoomScale(v.nodes.length))});